# Load the whale shark data using the 'read.csv' function
whaleshark <- read.csv('/Users/minahatayama/Desktop/GitHub/OCS2024_SDMworkshop/Data/Whalesharks_Maldives.csv', header = TRUE)
View(whaleshark)
whaleshark %>%
group_by(ANIMALID, date) %>%
summarise(daily_detections = n()) %>% # use summarise to calculate numbers of detections per day per animal
ggplot(mapping = aes(x = ANIMALID, y = daily_detections)) + # define the aesthetic map (what to plot)
xlab("Tag") + ylab("Number of detections per day") +
geom_boxplot() # define the geometric object (how to plot it).. in this case a boxplot
# Load 'tidyverse' - which we will use for data cleaning, filtering, and visualization
library(tidyverse)
whaleshark %>%
group_by(ANIMALID, date) %>%
summarise(daily_detections = n()) %>% # use summarise to calculate numbers of detections per day per animal
ggplot(mapping = aes(x = ANIMALID, y = daily_detections)) + # define the aesthetic map (what to plot)
xlab("Tag") + ylab("Number of detections per day") +
geom_boxplot() # define the geometric object (how to plot it).. in this case a boxplot
whaleshark <-
whaleshark %>%
mutate(date = as.Date(DATE)) # adding a column to the blacktip data with date of each detection
whaleshark %>%
group_by(ANIMALID, date) %>%
summarise(daily_detections = n()) %>% # use summarise to calculate numbers of detections per day per animal
ggplot(mapping = aes(x = ANIMALID, y = daily_detections)) + # define the aesthetic map (what to plot)
xlab("Tag") + ylab("Number of detections per day") +
geom_boxplot() # define the geometric object (how to plot it).. in this case a boxplot
whaleshark %>%
ggplot(mapping = aes(x = date, y = ANIMALID)) +
xlab("Date") + ylab("Tag") +
geom_point()
library(aniMotum)
install.packages("aniMotum",
repos = c("https://cloud.r-project.org",
"https://ianjonsen.r-universe.dev"),
dependencies = TRUE)
library(aniMotum)
View(whaleshark)
library(tidyverse)
library(aniMotum)
raw_data <- read_csv('/Users/minahatayama/Desktop/GitHub/OCS2024_SDMworkshop/Data/Whalesharks_Maldives.csv', header = TRUE)
raw_data <- read_csv('/Users/minahatayama/Desktop/GitHub/OCS2024_SDMworkshop/Data/Whalesharks_Maldives.csv', header = TRUE)
raw_data <- read_csv('/Users/minahatayama/Desktop/GitHub/OCS2024_SDMworkshop/Data/Whalesharks_Maldives.csv')
View(raw_data)
head(raw_data)
tagdat <- raw_data %>%
transmutate(id = ANIMALID,
date = DATE,
lc= ARGOSCLASS,
lon = LONGITUTE,
lat = LATITUDE)
library(tidyverse)
library(aniMotum)
tagdat <- raw_data %>%
transmutate(id = ANIMALID,
date = DATE,
lc= ARGOSCLASS,
lon = LONGITUTE,
lat = LATITUDE)
?transmutate()
?transmute()
tagdat <- raw_data %>%
dplyr::transmute(id = ANIMALID,
date = DATE,
lc= ARGOSCLASS,
lon = LONGITUTE,
lat = LATITUDE)
tagdat <- raw_data %>%
dplyr::transmute(id = ANIMALID,
date = DATE,
lc= ARGOSCLASS,
lon = LONGITUDE,
lat = LATITUDE)
View(tagdat)
tagdat %>%
group_by(id, lc) %>%
summarise(num_pos = n()) %>%
ggplot(aes(x = id, y = num_pos, fill = lc)) +
geom_col(position = "fill") +
labs(x = "Tag ID", y = "Proportion of fixes", fill = "Location\nClass") +
theme_bw()
fit <-
fit_ssm(x = tagdat,
vmax = 1.5, ## maximum speed of whale sharks (in m/s)
model = "mp", ## Move persistence model
time.step = 24) ## predict positions every 24 hours
head(tagdat)
plot(fit,
what = "fitted", ## what component of the model to plot ('fitted', 'predicted' or 'rerouted')
type = 2, ## type of plot to make
pages = 1,
ncol = 2)
fit <-
fit_ssm(x = tagdat,
vmax = 1.5, ## maximum speed of whale sharks (in m/s)
model = "mp", ## Move persistence model
time.step = 24) ## predict positions every 24 hours
tagdat %>%
mutate(date = as_datetime(date))
tagdat %>%
mutate(date = as_datetime(date))
tagdat %>%
mutate(dttm = as_datetime(date))
tagdat$dttm <- as_datetime(tagdat$date)
head(tagdat)
class(tagdat$dttm)
inherits(tagdat$dttm, "dttm")
tagdat %>%
mutate(dttm = ymd_hms(date))
inherits(tagdat$dttm, "dttm")
tagdat %>%
mutate(dttm = date(date))
tagdat %>%
mutate(dttm = as_datetime(date))
class(tagdat$dttm)
?aniMotum
?aniMotum::fit_ssm
raw_data <- read_csv('/Users/minahatayama/Desktop/GitHub/OCS2024_SDMworkshop/Data/Whalesharks_Maldives.csv')
tagdat <- raw_data %>%
dplyr::transmute(id = ANIMALID,
date = DATE,
lc= ARGOSCLASS,
lon = LONGITUDE,
lat = LATITUDE)
tagdat2 <- format_data(
raw_data,
id = "ANIMALID",
date = "DATE",
lc = "ARGOSCLASS",
coord = c("LONGITUDE", "LATITUDE"),
)
View(tagdat2)
tagdat2 %>%
group_by(id, lc) %>%
summarise(num_pos = n()) %>%
ggplot(aes(x = id, y = num_pos, fill = lc)) +
geom_col(position = "fill") +
labs(x = "Tag ID", y = "Proportion of fixes", fill = "Location\nClass") +
theme_bw()
fit <-
fit_ssm(x = tagdat2,
vmax = 1.5, ## maximum speed of whale sharks (in m/s)
model = "mp", ## Move persistence model
time.step = 24) ## predict positions every 24 hours
is.atomic(tagdat)
is.atomic(tagdat$id)
is.atomic(tagdat$date)
is.atomic(tagdat$lc)
is.atomic(tagdat$lon)
is.atomic(tagdat$lat)
remove.package("aniMotum")
remove.packages("aniMotum")
remove.packages("TMB")
